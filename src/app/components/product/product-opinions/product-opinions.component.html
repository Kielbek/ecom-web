<div class="opinion-container">
  <div class="product-opinions">
    <div class="opinion-overview">
      <div class="opinion-title">Opinie o produkcie</div>
      <div class="opinion-summary">Rewelacyjny</div>
      <div class="opinion-summary">4,92/5</div>
      <div class="opinion-stats">
        <span>5101 ocen i 1305 recenzji</span>
      </div>
    </div>
    <div class="opinion-distribution">
      <div class="distribution-item">
        <div class="distribution-label">5</div>
        <div class="distribution-bar">
          <div class="bar-fill" style="width: 93.5%;"></div>
        </div>
        <div class="distribution-count">4770</div>
      </div>
      <div class="distribution-item">
        <div class="distribution-label">4</div>
        <div class="distribution-bar">
          <div class="bar-fill" style="width: 5.4%;"></div>
        </div>
        <div class="distribution-count">275</div>
      </div>
      <div class="distribution-item">
        <div class="distribution-label">3</div>
        <div class="distribution-bar">
          <div class="bar-fill" style="width: 0.6%;"></div>
        </div>
        <div class="distribution-count">30</div>
      </div>
      <div class="distribution-item">
        <div class="distribution-label">2</div>
        <div class="distribution-bar">
          <div class="bar-fill" style="width: 0.2%;"></div>
        </div>
        <div class="distribution-count">11</div>
      </div>
      <div class="distribution-item">
        <div class="distribution-label">1</div>
        <div class="distribution-bar">
          <div class="bar-fill" style="width: 0.3%;"></div>
        </div>
        <div class="distribution-count">15</div>
      </div>
    </div>
  </div>
  <div class="comments-container">
    <h3>Opinie o produkcie</h3>
    <h6>
      <i class="bi bi-check-circle-fill"></i>
      Wszystkie opinie są potwierdzone zakupem
    </h6>
    <div class="comment-content">
      <div *ngIf="comments.length > 0; else noComments">
        <div class="comment" *ngFor="let comment of comments">
          <div class="comment-header">
            <div class="comment-left-content">
              <div class="comment-author">{{ comment.author }}</div>
              <app-star-rating [rating]="3"></app-star-rating>
            </div>
            <div class="comment-date">{{ comment.date }}</div>
          </div>
          <div class="comment-text">{{ comment.text }}</div>
          <button class="like-button">
            <i class="bi bi-hand-thumbs-up"></i>
            {{ comment.likes }}</button>
        </div>
      </div>
    </div>
    <ng-template #noComments>
      <p>Brak komentarzy do wyświetlenia.</p>
    </ng-template>
    <button class="show-more-button" *ngIf="comments.length > 0" (click)="openModal()">
      Pokaż więcej komentarzy
    </button>
  </div>
</div>

<app-product-opinion-pop-up *ngIf="showModal" (close)="closeModal()">
  <div class="comment" *ngFor="let comment of comments">
    <div class="comment-header">
      <div class="comment-left-content">
        <div class="comment-author">{{ comment.author }}</div>
        <app-star-rating [rating]="3"></app-star-rating>
      </div>
      <div class="comment-date">{{ comment.date }}</div>
    </div>
    <div class="comment-text">{{ comment.text }}</div>
    <button class="like-button">
      <i class="bi bi-hand-thumbs-up"></i>
      {{ comment.likes }}</button>
  </div>
</app-product-opinion-pop-up>


